# Level 2: 認証の実装

## 🎯 このレベルの学習目標

- JWT トークンの仕組みを詳しく理解する
- セッション管理の実装方法を学ぶ
- パスワードの安全な取り扱いを知る
- 実際のログインフローの実装を理解する
- バケットリストアプリの認証実装を詳しく分析する

## 📚 学習内容

### 📖 推奨学習順序

1. **[JWT の基礎](./jwt-basics.md)** - トークンベース認証の仕組み
2. **[セッション管理](./session-management.md)** - ログイン状態の管理方法
3. **[パスワードセキュリティ](./password-security.md)** - 安全なパスワード処理
4. **[ログインフロー](./login-flow.md)** - 実際の認証処理の流れ

## ⏱️ 想定学習時間

**初心者の方**: 3-4時間  
**経験者の方**: 1-2時間（復習として）

## 🔍 学習のポイント

### 重要な概念

- **JWT (JSON Web Token)**: 認証情報を含むトークン形式
- **セッション**: ユーザーのログイン状態を管理する仕組み
- **Cookie**: ブラウザに情報を保存する仕組み
- **ハッシュ化**: パスワードを安全に保存する方法
- **認証フロー**: ログインからログアウトまでの一連の処理

### 技術的なポイント

- **フロントエンドとバックエンドの役割分担**
- **セキュアな通信方法**（HTTPS、Cookie の設定など）
- **エラーハンドリング**の重要性
- **ユーザー体験**とセキュリティのバランス

## 🛠️ 実装例の確認

このレベルでは、バケットリストアプリの実際のコードを参照しながら学習します：

### 📁 関連ファイル

```
app/features/auth/
├── lib/
│   └── auth-context.tsx      # 認証状態管理
├── components/
│   └── auth-guard.tsx        # ルート保護
├── types.ts                  # 型定義
└── hooks/
    └── use-auth.ts          # 認証フック

app/lib/
├── auth-server.ts           # サーバーサイド認証
├── security-utils.ts        # セキュリティユーティリティ
└── supabase.ts             # Supabase クライアント

app/routes/auth/
├── login.tsx               # ログインページ
└── register.tsx           # 登録ページ
```

### 💡 学習のコツ

1. **コードを読みながら学習**: 実際の実装を見ることで理解が深まります
2. **図解を活用**: シーケンス図やフローチャートで流れを理解しましょう
3. **セキュリティを意識**: なぜその実装が必要なのかを考えましょう
4. **段階的に理解**: 全体の流れを把握してから詳細に進みましょう

## 🎓 このレベルを完了すると

- JWT トークンがどのように動作するかを説明できる
- セッション管理の仕組みを理解できる
- パスワードを安全に取り扱う方法を知っている
- ログインフローの実装ができる
- 認証に関するセキュリティ対策を理解している
- バケットリストアプリの認証システムを詳細に説明できる

## 📋 学習チェックリスト

学習が完了したら、以下を確認してみてください：

- [ ] JWT の構造（Header、Payload、Signature）を説明できる
- [ ] セッションと Cookie の違いを理解している
- [ ] パスワードのハッシュ化の仕組みを知っている
- [ ] ログイン失敗時の適切なエラーハンドリングができる
- [ ] 認証状態の管理方法を理解している
- [ ] セキュアな Cookie の設定ができる
- [ ] アクティビティ監視の重要性を理解している

## 🚀 次のステップ

Level 2 を完了したら、**Level 3: 認可の実装** に進みましょう。

Level 3 では、認証されたユーザーに適切な権限を与える仕組みについて学びます。